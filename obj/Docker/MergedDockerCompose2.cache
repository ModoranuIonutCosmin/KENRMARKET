services:
  cart.api:
    build:
      context: C:\Users\zero6\source\repos\KMarketplace
      dockerfile: src/Cart/Cart.API/Dockerfile
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ConnectionStrings__SqlServer: Server=host.docker.internal,1433;User ID=sa;Password=123;Initial
        Catalog=Carts;Integrated Security=False
    image: cartapi
    ports:
    - published: 6002
      target: 80
  customers.api:
    build:
      context: C:\Users\zero6\source\repos\KMarketplace
      dockerfile: src/Customers/Customers.API/Dockerfile
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ConnectionStrings__SqlServer: Server=host.docker.internal,1433;User ID=sa;Password=123;Initial
        Catalog=Customers;Integrated Security=False
    image: customersapi
    ports:
    - published: 6003
      target: 80
  gateway.api:
    build:
      context: C:\Users\zero6\source\repos\KMarketplace
      dockerfile: src/Gateway/Gateway.API/Dockerfile
    depends_on:
      cart.api:
        condition: service_started
      customers.api:
        condition: service_started
      products.api:
        condition: service_started
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      Services__Cart: http://cart.api
      Services__Customers: http://customers.api
      Services__Products: http://products.api
    image: gatewayapi
    ports:
    - published: 6001
      target: 80
  products.api:
    build:
      context: C:\Users\zero6\source\repos\KMarketplace
      dockerfile: src/Products/Products.API/Dockerfile
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ConnectionStrings__Mongo__Host: mongodb://host.docker.internal:27017
    image: productsapi
    ports:
    - published: 6004
      target: 80
version: '3.4'